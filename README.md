# Essence Management - Mystical Agriculture Auto-Crafter [Generated by AI]

This ComputerCraft Lua script automates the crafting of higher-tier Essences from lower-tier Essences within a modded Minecraft environment, specifically targeting the **Mystical Agriculture** and **Mystical Agradditions** mods. It leverages the **Applied Energistics 2 (AE2)** mod's ME Network for item storage and retrieval.

## Purpose

The primary goal of this script is to automatically convert lower-tier Essences into higher-tier Essences, maintaining a desired stock level of each Essence within the ME Network. It handles the tiered Essence system, where 4 of a lower-tier Essence are combined to create 1 of the next higher tier.

## Features

*   **Automated Essence Crafting:** Continuously crafts higher-tier Essences from lower-tier ones.
*   **ME Network Integration:** Uses an ME Bridge peripheral to interact with the AE2 ME Network for item storage and retrieval.
*   **Tiered Essence Support:** Recognizes and handles the following Essence tiers:
    *   Inferium (Lowest)
    *   Prudentium
    *   Tertium
    *   Imperium
    *   Supremium
    *   Insanium (Highest)
*   **Threshold Management:** Maintains a configurable minimum stock level (`Threshold`) for each higher-tier Essence. Crafting stops for an essence when this threshold is reached.
*   **Export Limit:** Limits the maximum number of lower-tier Essences exported at once (`ExportUpperLimit`) to prevent overwhelming the crafting system.
*   **Dashboard Display:** If a monitor peripheral is available, it displays a real-time dashboard showing:
    *   Current day.
    *   Configured `Threshold` and `ExportUpperLimit`.
    *   Current amount of each Essence in the ME Network.
*   **Command-Line Arguments:** Allows customization of `Threshold` and `ExportUpperLimit` when starting the program.
*   **Error Handling:** Includes checks for the presence of the ME Bridge and monitor peripherals, as well as ME Network connectivity.
* **Clear output:** The terminal output is clear and concise, showing the amount of essences being converted, and if an essence is over the threshold.

## Requirements

*   **ComputerCraft:** The core mod for programmable computers.
*   **Applied Energistics 2 (AE2):** For the ME Network and ME Bridge.
*   **Mystical Agriculture:** For the Essence system.
*   **Mystical Agradditions:** For the Insanium Essence.
*   **ME Bridge Peripheral:** A ComputerCraft peripheral that connects to the AE2 ME Network.
*   **Monitor Peripheral (Optional):** For the dashboard display.

## Setup

1.  **Install Mods:** Ensure all required mods are installed in your Minecraft instance.
2.  **Place ME Bridge:** Place an ME Bridge peripheral in your world and connect it to your ME Network.
3.  **Place Monitor (Optional):** Place a monitor peripheral if you want to use the dashboard.
4.  **Transfer Script:** Copy the `Essence Management.lua` script to a Computer in your Minecraft world.
5.  **Run the Script:** Execute the script using the `lua` command in the ComputerCraft terminal:
    *   `lua Essence Management.lua` (for default settings)
    *   `lua Essence Management.lua -threshold=10000 -limit=128` (to set a custom threshold of 10000 and an export limit of 128)

## Configuration

The script can be configured in two ways:

1.  **Command-Line Arguments:**
    *   `-threshold=<integer>`: Sets the desired stock level for higher-tier Essences. Default: `12288`.
    *   `-limit=<integer>`: Sets the maximum number of lower-tier Essences to export at once. Default: `256`.

2.  **Directly in the Script:**
    *   You can modify the `Threshold` and `ExportUpperLimit` variables directly within the `Essence Management.lua` file, but it is not recommended.

## How It Works

1.  **Initialization:**
    *   The script checks for the presence of the ME Bridge and monitor peripherals.
    *   It attempts to connect to the ME Network via the ME Bridge.
    *   It defines the Essence tiers and their properties.
    *   It parses any command-line arguments.

2.  **Main Loop:**
    *   The script enters an infinite loop (`while true do`).
    *   It iterates through each Essence pair (Inferium -> Prudentium, Prudentium -> Tertium, etc.).
    *   For each pair, it calls the `processConversion` function.

3.  **`processConversion` Function:**
    *   Retrieves the current amount of the lower-tier and higher-tier Essences from the ME Network.
    *   Calculates how many batches of 4 lower-tier Essences can be converted into higher-tier Essences without exceeding the `Threshold`.
    *   Limits the number of conversions based on the `ExportUpperLimit`.
    *   Calls the `CraftEssence` function to initiate the crafting.
    * Prints a message to the terminal with the amount of essences converted, or if the essence is over the threshold.

4.  **`CraftEssence` Function:**
    *   Exports the required amount of lower-tier Essences from the ME Network to the crafting setup.

5.  **`drawDashboard` Function:**
    *   If a monitor is present, it updates the dashboard with the current Essence amounts.

## Notes

*   The script assumes that the crafting setup is connected to the ME Network and can automatically craft items when they are exported to it.
*   The monitor refresh can cause flickering.
* The script will exit if the ME Bridge is not found, or if it is disconnected for more than 5 seconds.

## License

This script is provided as-is, without any warranty. Use at your own risk.
